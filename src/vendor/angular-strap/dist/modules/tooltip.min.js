/**
 * angular-strap
 * @version v2.1.6 - 2015-02-03
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var t=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function(e,o,n,i,a,r,l,s,c,u,f){function p(e,i){function a(){K.$emit(O.prefixEvent+".show",F)}function r(){if(K.$emit(O.prefixEvent+".hide",F),j===W){if(R&&"focus"===O.trigger)return e[0].blur();P()}}function p(){var t=O.trigger.split(" ");angular.forEach(t,function(t){"click"===t?e.on("click",F.toggle):"manual"!==t&&(e.on("hover"===t?"mouseenter":"focus",F.enter),e.on("hover"===t?"mouseleave":"blur",F.leave),"button"===A&&"hover"!==t&&e.on($?"touchstart":"mousedown",F.$onFocusElementMouseDown))})}function v(){for(var t=O.trigger.split(" "),o=t.length;o--;){var n=t[o];"click"===n?e.off("click",F.toggle):"manual"!==n&&(e.off("hover"===n?"mouseenter":"focus",F.enter),e.off("hover"===n?"mouseleave":"blur",F.leave),"button"===A&&"hover"!==n&&e.off($?"touchstart":"mousedown",F.$onFocusElementMouseDown))}}function y(){"focus"!==O.trigger?j.on("keyup",F.$onKeyUp):e.on("keyup",F.$onFocusKeyUp)}function k(){"focus"!==O.trigger?j.off("keyup",F.$onKeyUp):e.off("keyup",F.$onFocusKeyUp)}function S(){f(function(){j.on("click",E),w.on("click",F.hide),z=!0},0,!1)}function C(){z&&(j.off("click",E),w.off("click",F.hide),z=!1)}function E(t){t.stopPropagation()}function x(t){t=t||O.target||e;var o=t[0],n=o.getBoundingClientRect(),i={};for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);null===n.width&&(i=angular.extend({},i,{width:n.right-n.left,height:n.bottom-n.top}));var r;return r="body"===O.container?c.offset(o):c.position(o),angular.extend({},i,r)}function D(t,e,o,n){var i,a=t.split("-");switch(a[0]){case"right":i={top:e.top+e.height/2-n/2,left:e.left+e.width};break;case"bottom":i={top:e.top+e.height,left:e.left+e.width/2-o/2};break;case"left":i={top:e.top+e.height/2-n/2,left:e.left-o};break;default:i={top:e.top-n,left:e.left+e.width/2-o/2}}if(!a[1])return i;if("top"===a[0]||"bottom"===a[0])switch(a[1]){case"left":i.left=e.left;break;case"right":i.left=e.left+e.width-o}else if("left"===a[0]||"right"===a[0])switch(a[1]){case"top":i.top=e.top-n;break;case"bottom":i.top=e.top+e.height}return i}function T(t,e){j.css({top:t+"px",left:e+"px"})}function P(){clearTimeout(H),F.$isShown&&null!==j&&(O.autoClose&&C(),O.keyboard&&k()),B&&(B.$destroy(),B=null),j&&(j.remove(),j=F.$element=null)}var F={},A=e[0].nodeName.toLowerCase(),O=F.$options=angular.extend({},t,i);F.$promise=g(O.template);var K=F.$scope=O.scope&&O.scope.$new()||o.$new();if(O.delay&&angular.isString(O.delay)){var U=O.delay.split(",").map(parseFloat);O.delay=U.length>1?{show:U[0],hide:U[1]}:U[0]}F.$id=O.id||e.attr("id")||"",O.title&&(K.title=s.trustAsHtml(O.title)),K.$setEnabled=function(t){K.$$postDigest(function(){F.setEnabled(t)})},K.$hide=function(){K.$$postDigest(function(){F.hide()})},K.$show=function(){K.$$postDigest(function(){F.show()})},K.$toggle=function(){K.$$postDigest(function(){F.toggle()})},F.$isShown=K.$isShown=!1;var H,M;O.contentTemplate&&(F.$promise=F.$promise.then(function(t){var e=angular.element(t);return g(O.contentTemplate).then(function(t){var o=d('[ng-bind="content"]',e[0]);return o.length||(o=d('[ng-bind="title"]',e[0])),o.removeAttr("ng-bind").html(t),e[0].outerHTML})}));var q,j,L,N,B;F.$promise.then(function(t){angular.isObject(t)&&(t=t.data),O.html&&(t=t.replace(b,'ng-bind-html="')),t=m.apply(t),L=t,q=n(t),F.init()}),F.init=function(){O.delay&&angular.isNumber(O.delay)&&(O.delay={show:O.delay,hide:O.delay}),"self"===O.container?N=e:angular.isElement(O.container)?N=O.container:O.container&&(N=d(O.container)),p(),O.target&&(O.target=angular.isElement(O.target)?O.target:d(O.target)),O.show&&K.$$postDigest(function(){"focus"===O.trigger?e[0].focus():F.show()})},F.destroy=function(){v(),P(),K.$destroy()},F.enter=function(){return clearTimeout(H),M="in",O.delay&&O.delay.show?void(H=setTimeout(function(){"in"===M&&F.show()},O.delay.show)):F.show()},F.show=function(){if(O.bsEnabled&&!F.$isShown){K.$emit(O.prefixEvent+".show.before",F);var t,o;O.container?(t=N,o=N[0].lastChild?angular.element(N[0].lastChild):null):(t=null,o=e),j&&P(),B=F.$scope.$new(),j=F.$element=q(B,function(){}),j.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}),O.animation&&j.addClass(O.animation),O.type&&j.addClass(O.prefixClass+"-"+O.type),O.customClass&&j.addClass(O.customClass);var n=l.enter(j,t,o,a);n&&n.then&&n.then(a),F.$isShown=K.$isShown=!0,h(K),u(function(){F.$applyPlacement(),j&&j.css({visibility:"visible"})}),O.keyboard&&("focus"!==O.trigger&&F.focus(),y()),O.autoClose&&S()}},F.leave=function(){return clearTimeout(H),M="out",O.delay&&O.delay.hide?void(H=setTimeout(function(){"out"===M&&F.hide()},O.delay.hide)):F.hide()};var R,W;F.hide=function(t){if(F.$isShown){K.$emit(O.prefixEvent+".hide.before",F),R=t,W=j;var e=l.leave(j,r);e&&e.then&&e.then(r),F.$isShown=K.$isShown=!1,h(K),O.keyboard&&null!==j&&k(),O.autoClose&&null!==j&&C()}},F.toggle=function(){F.$isShown?F.leave():F.enter()},F.focus=function(){j[0].focus()},F.setEnabled=function(t){O.bsEnabled=t},F.$applyPlacement=function(){if(j){var o=O.placement,n=/\s?auto?\s?/i,i=n.test(o);i&&(o=o.replace(n,"")||t.placement),j.addClass(O.placement);var a=x(),r=j.prop("offsetWidth"),l=j.prop("offsetHeight");if(i){var s=o,c=O.container?angular.element(document.querySelector(O.container)):e.parent(),u=x(c);s.indexOf("bottom")>=0&&a.bottom+l>u.bottom?o=s.replace("bottom","top"):s.indexOf("top")>=0&&a.top-l<u.top&&(o=s.replace("top","bottom")),("right"===s||"bottom-left"===s||"top-left"===s)&&a.right+r>u.width?o="right"===s?"left":o.replace("left","right"):("left"===s||"bottom-right"===s||"top-right"===s)&&a.left-r<u.left&&(o="left"===s?"right":o.replace("right","left")),j.removeClass(s).addClass(o)}var f=D(o,a,r,l);T(f.top,f.left)}},F.$onKeyUp=function(t){27===t.which&&F.$isShown&&(F.hide(),t.stopPropagation())},F.$onFocusKeyUp=function(t){27===t.which&&(e[0].blur(),t.stopPropagation())},F.$onFocusElementMouseDown=function(t){t.preventDefault(),t.stopPropagation(),F.$isShown?e[0].blur():e[0].focus()};var z=!1;return F}function h(t){t.$$phase||t.$root&&t.$root.$$phase||t.$digest()}function d(t,e){return angular.element((e||document).querySelectorAll(t))}function g(t){return r.get(t,{cache:a}).then(function(t){return t.data})}var m=String.prototype.trim,$="createTouch"in e.document,b=/ng-bind="/gi,w=angular.element(e.document);return p}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(t,e,o,n,i){return{restrict:"EAC",scope:!0,link:function(t,e,a){var r={scope:t};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","keyboard","html","animation","backdropAnimation","type","customClass","id"],function(t){angular.isDefined(a[t])&&(r[t]=a[t])}),e.attr("data-target")&&(r.target=e.attr("data-target")),t.hasOwnProperty("title")||(t.title=""),a.$observe("title",function(e){if(angular.isDefined(e)||!t.hasOwnProperty("title")){var n=t.title;t.title=o.trustAsHtml(e),angular.isDefined(n)&&i(function(){l&&l.$applyPlacement()})}}),a.bsTooltip&&t.$watch(a.bsTooltip,function(e,o){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(o)&&i(function(){l&&l.$applyPlacement()})},!0),a.bsShow&&t.$watch(a.bsShow,function(t){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(tooltip),?/i)),t===!0?l.show():l.hide())}),a.bsEnabled&&t.$watch(a.bsEnabled,function(t){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|1|,?(tooltip),?/i)),l.setEnabled(t===!1?!1:!0))});var l=n(e,r);t.$on("$destroy",function(){l&&l.destroy(),r=null,l=null})}}}]);
//# sourceMappingURL=tooltip.min.js.map